{"version":3,"file":"js/765.2b4610fc.js","mappings":"6JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,eAAe,MAAQ,UAAU,UAAU,IAAIC,GAAG,CAAC,MAAQL,EAAIM,QAAQ,OAASN,EAAIO,WAAW,CAACL,EAAG,MAAM,CAACM,IAAI,SAASC,YAAY,OAAOL,MAAM,CAAC,GAAK,SAAS,MAAQ,YACnQ,EACGM,EAAkB,G,UCetB,GACAC,KAAAA,UACAC,QAAAA,CACAN,UACAO,QAAAA,IAAAA,WACA,sBACA,SACA,CAAAC,IAAAA,GAAAC,MAAAA,CAAAC,MAAAA,IAAAC,OAAAA,OACA,GACA,0DACA,EACAC,cAAAA,EAAAA,GAEAL,QAAAA,IAAAA,kBAAAA,IAAAA,GACA,mBACA,uDAEA,oBAEAA,QAAAA,IAAAA,+BAAAA,EAEA,EAEAM,cAAAA,GAGAN,QAAAA,KAAAA,qBAAAA,IAEA,EACAO,SAAAA,GACAP,QAAAA,IAAAA,EAAAA,KAAAA,SACA,gBACAQ,EAAAA,OAAAA,EACA,qCAEA,qBACA,sCAEA,gBACA,EACAd,WACAM,QAAAA,IAAAA,WAAAA,KAAAA,QAAAA,aACA,qEAGA,iBACA,EACAS,SACAT,QAAAA,IAAAA,OAAAA,KAAAA,MACA,GAGAU,SAAAA,CACAF,OACA,kCACA,ICxEuP,I,UCOnPG,GAAY,OACd,EACAzB,EACAW,GACA,EACA,KACA,KACA,MAIF,EAAec,EAAiB,O","sources":["webpack://noosphere/./src/views/QrModal.vue","webpack://noosphere/src/views/QrModal.vue","webpack://noosphere/./src/views/QrModal.vue?2c72","webpack://noosphere/./src/views/QrModal.vue?4cb3"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-modal',{attrs:{\"id\":\"modal-qrscan\",\"title\":\"QR scan\",\"ok-only\":\"\"},on:{\"shown\":_vm.onShown,\"hidden\":_vm.onHidden}},[_c('div',{ref:\"reader\",staticClass:\"my-4\",attrs:{\"id\":\"reader\",\"width\":\"600px\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-modal id=\"modal-qrscan\" title=\"QR scan\" @shown=\"onShown\" ok-only @hidden=\"onHidden\">\n\n\n    <div class=\"my-4\" id=\"reader\" ref=\"reader\" width=\"600px\"></div>\n\n\n  </b-modal>\n</template>\n\n<!-- @show=\"resetModal\"\n@hidden=\"resetModal\"\n@shown -->\n\n<script>\nimport {Html5QrcodeScanner} from \"html5-qrcode\"\n\nexport default {\n  name: 'QrModal',\n  methods:{\n    onShown(){\n      console.log('onshown')\n      this.scanner = new Html5QrcodeScanner(\n        \"reader\",\n        { fps: 10, qrbox: {width: 250, height: 250} },\n        /* verbose= */ false);\n        this.scanner.render(this.onScanSuccess, this.onScanFailure);\n      },\n      onScanSuccess(decodedText, decodedResult) {\n        // handle the scanned code as you like, for example:\n        console.log(`Code matched = ${decodedText}`, decodedResult);\n        let eq_splitted = decodedText.split('=')\n        if(eq_splitted[0] == 'https://scenaristeur.github.io/noosphere/?room'){\n          //  this.$emit('roomIdChanged', eq_splitted[1])\n          this.openRoom(eq_splitted[1])\n        }else{\n          console.log(\"i don't know what to do with\", eq_splitted)\n        }\n      },\n\n      onScanFailure(error) {\n        // handle scan failure, usually better to ignore and keep scanning.\n        // for example:\n        console.warn(`Code scan error = ${error}`);\n        //this.scanner = error\n      },\n      openRoom(roomId){\n        console.log(roomId, this.scanner)\n              let user = this.user\n        user.roomId = roomId\n        this.$store.commit('core/setUser', user)\n\n        this.$nextTick(() => {\n          this.$bvModal.hide('modal-qrscan')\n        })\n            this.$openRoom()\n      },\n      onHidden(){\n        console.log('onHidden', this.scanner.html5Qrcode)\n        this.scanner.html5Qrcode.isScanning ? this.scanner.html5Qrcode.stop() : \"\"\n        // this.$refs.reader.innerHTML = \"\"\n        // this.$refs.reader.style = \"\"\n        this.scanner = null\n      },\n      saveQR(){\n        console.log('todo', this.QRsrc)\n      },\n\n    },\n    computed:{\n      user(){\n        return this.$store.state.core.user\n      },\n    }\n\n\n  }\n  </script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QrModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QrModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QrModal.vue?vue&type=template&id=6a58be04&\"\nimport script from \"./QrModal.vue?vue&type=script&lang=js&\"\nexport * from \"./QrModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","on","onShown","onHidden","ref","staticClass","staticRenderFns","name","methods","console","fps","qrbox","width","height","onScanSuccess","onScanFailure","openRoom","user","saveQR","computed","component"],"sourceRoot":""}