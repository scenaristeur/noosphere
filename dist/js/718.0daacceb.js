"use strict";(self["webpackChunknoosphere"]=self["webpackChunknoosphere"]||[]).push([[718],{3718:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});var a,r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"room-card"},[t("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:"Card Title","img-src":"https://picsum.photos/600/300/?image=25","img-alt":"Image","img-top":"",tag:"article"}},[t("b-card-text",[e._v(" room : "+e._s(e.room)+" "),t("hr"),e._v(" ymap : "+e._s(e.ymap)+" "),t("hr"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{placeholder:"name of the new node"},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}}),t("button",{on:{click:e.addNodeToMap}},[e._v("Add node to map")]),t("button",{on:{click:e.clearMap}},[e._v("clear map")]),t("button",{on:{click:e.populateMap}},[e._v("populate map")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newStuff,expression:"newStuff"}],attrs:{placeholder:"name of the stuff"},domProps:{value:e.newStuff},on:{input:function(t){t.target.composing||(e.newStuff=t.target.value)}}}),t("button",{on:{click:e.changeStuff}},[e._v("change stuff")])]),t("b-button",{attrs:{href:"#",variant:"primary"}},[e._v("Go somewhere")])],1)],1)},n=[],s=o(567),i=o(249),p=o(2213),l=o(3089),c=(o(8675),o(7380),o(1118),o(1703),new Uint8Array(16));function m(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(c)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function u(e){return"string"===typeof e&&d.test(e)}for(var h=u,f=[],g=0;g<256;++g)f.push((g+256).toString(16).substr(1));function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!h(o))throw TypeError("Stringified UUID is invalid");return o}var w=y;function v(e,t,o){e=e||{};var a=e.random||(e.rng||m)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){o=o||0;for(var r=0;r<16;++r)t[o+r]=a[r];return t}return w(a)}var b=v;let S=0;var N={name:"RoomCard",data(){return{newName:"",ymap:null,newStuff:"c4"}},created(){const e=new s.QW,t=new l.H7("count-demo",e);t.whenSynced.then((()=>{console.log("loaded data from indexed db")}));const o=new i.x$("count-demo",e),a=new p.V("wss://demos.yjs.dev","count-demo",e);console.log("providers",o,a),this.yarray=e.getArray("count"),this.ymap=e.getMap("test-map2"),this.yarray.observe((e=>{console.log(e),console.log(this.yarray.toJSON())}));let r=0;this.ymap.observeDeep((e=>{e.forEach((e=>{r++,console.log("calls",r),console.log(e.keysChanged.has("deepmap")),console.log(1===e.path.length),console.log("map"===e.path[0]),console.log(e,e)})),this.$forceUpdate()})),this.yarray.push([2]),this.populateMap()},methods:{addToArray(){this.yarray.push([this.newVal]),this.newVal="1"},clear(){this.yarray.delete(0,this.yarray.length)},addNode(){let e={id:"ered",name:"er",created:"frt"};console.log("does not work!",e),this.yarray.push(e),this.newName=""},addNodeToMap(){let e={id:b(),name:this.newName,created:Date.now()};this.ymap.set(e.id,e),this.newName="",this.$forceUpdate()},clearMap(){this.ymap.clear(),this.$forceUpdate()},populateMap(){this.ymap.set("map",new s.D5);const e=this.ymap.get("map");e.set("deepmap",new s.D5),this.ymap.set("stuff one","c2"),e.set("stuff","c3")},changeStuff(){const e=this.ymap.get("map");e.set("stuff",this.newStuff),this.newStuff="c4",this.$forceUpdate()}},watch:{room(){console.log("room",this.room),this.room.observeDeep((e=>{e.forEach((e=>{S++,console.log("calls",S),console.log(e.keysChanged.has("deepmap")),console.log(1===e.path.length),console.log("map"===e.path[0]),console.log(e,e)}))})),this.$forceUpdate()}},computed:{room(){return this.$store.state.core.room},rooms(){return this.$store.state.core.rooms}}},C=N,k=o(1001),_=(0,k.Z)(C,r,n,!1,null,"c6263e78",null),$=_.exports}}]);
//# sourceMappingURL=718.0daacceb.js.map